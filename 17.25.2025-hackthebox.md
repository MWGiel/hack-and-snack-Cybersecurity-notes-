# HTB / Lab — SSH access & privilege escalation (summary)  
**Date:** 17.10.2025  
**Environment:** Virtual lab (Kali/Parrot → target VM)  
**Target:** `<TARGET_IP>` (anonymized)

> **Legal / ethical note:** All actions were performed in a controlled lab environment with authorization (CTF / training machine). Do **not** run these techniques against systems you do not have explicit permission to test.

---

## High-level summary
- Performed network reconnaissance with **Nmap** to discover services.  
- Gained initial access to the target via **SSH** using provided credentials for `user1`.  
- Checked sudo privileges (`sudo -l`) and discovered the ability to run commands as another user.  
- Switched user context to `user2` (`sudo -u user2 /bin/bash`) and retrieved the first flag (`cat flag.txt`).  
- Created an **SSH key** and used it to escalate privileges to root.  
- Accessed the root directory and retrieved the second flag (`cat /root/flag.txt`).

---

## Key steps (descriptive)

1. **Reconnaissance**
   - Scanned the target with Nmap to enumerate open ports and services; SSH was available.

2. **Initial access**
   - Connected over SSH with the provided task credentials:
     ```bash
     ssh -l user1 <TARGET_IP>
     ```
   - Entered the password supplied by the challenge.

3. **Privilege discovery**
   - Checked allowed sudo commands:
     ```bash
     sudo -l
     ```
   - Found a sudo rule enabling execution as `user2`.

4. **Lateral/local user switch**
   - Switched to `user2` shell:
     ```bash
     sudo -u user2 /bin/bash
     ```
   - Located and read the first flag:
     ```bash
     cat flag.txt
     ```

5. **Privilege escalation via SSH key**
   - Generated an SSH key pair locally and placed the public key on the target (lab-allowed method).  
   - Used the key-based auth to obtain a more privileged SSH session and escalate to root.

6. **Root access & final flag**
   - As root, read the root flag:
     ```bash
     cat /root/flag.txt
     ```

---

## Observations & lessons
- Always enumerate sudo rights early — `sudo -l` can reveal unexpected privilege paths.   
- Keep sensitive outputs and real credentials out of public repos — store them privately for reporting.

---
